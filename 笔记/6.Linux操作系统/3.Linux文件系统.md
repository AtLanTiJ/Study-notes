# Linux的文件系统

## 一、文件系统解读

- 在Linux下运行“df -h”命令，可以看到目前Linux中存在的硬盘分区情况，及每个分区的硬盘使用情况。

  ```
  [root@localhost ~]# df -h
  文件系统                 容量  已用  可用 已用% 挂载点
  devtmpfs                 475M     0  475M    0% /dev
  tmpfs                    487M     0  487M    0% /dev/shm
  tmpfs                    487M  7.7M  479M    2% /run
  tmpfs                    487M     0  487M    0% /sys/fs/cgroup
  /dev/mapper/centos-root   17G  1.3G   16G    8% /
  /dev/sda1               1014M  139M  876M   14% /boot
  tmpfs                     98M     0   98M    0% /run/user/0
  ```

- 对上述几个挂载的目录进行简要的说明

  - /dev:dev是（device）的英文缩写。这个目录对所有用户都十分重要。因为在这个目录中包括了所有Linux系统中所使用的外部设备

  - /dev/shm:该目录是Linux下一个非常有用的目录，因为这个目录不在硬盘上，而是在内存里。因此在Linux下，就不需要大费周折去建ramdisk，直接使用该目录就可以打到很好的优化效果。该分区的大小通常是系统内存的一半大小，由于该目录是驻留在内存中，所以对于在系统中需要使用的临时数据，可以将其存储在该目录中，就相当于我们直接在使用内存读写文件，速度相当快。（基本来说，内存的读写速度可以达到硬盘的100倍左右）

    > 内存除了快，还有一个特性：断电数据全部丢失

  - /run:一些运行过程中跟用户或进程有关的数据，属于内核级文件

  - /sys/fs/cgroup:关于运行过程中CPU、内存等数据，属于内核级文件。

  - /:根目录，用户可以使用的保存操作系统其他文件的目录，用户也可以创建自己的目录。

  - /boot:操作协同的内核及在引导过程中使用的文件。

  - /home:普通用户使用的根目录，通常也称为家目录，类似于Windows下的c:\user目录。

  - /run/user/0:编号ID为0的用户（通常指root）在运行过程中产生的数据。

- 另外，在Linux中，文件系统通常由以下类型构成，其特点总结如下：

  | 文件系统 | 最大文件名长度 | 最大文件大小 | 最大分区大小 |
  | -------- | -------------- | ------------ | ------------ |
  | ext2     | 255bytes       | 2TB          | 16TB         |
  | ext3     | 255bytes       | 2TB          | 16TB         |
  | ext4     | 255bytes       | 16TB         | 1EB          |
  | XFS      | 255bytes       | 8EB          | 8EB          |

  > 1TB=1024GB，1PB=1024TB，1EB=1024PB，目前还没有单个存储器达到EB这个容量级别

## 二、Linux根目录说明

| 命令实例       | 作用                                                         |
| -------------- | ------------------------------------------------------------ |
| /              | 表示根目录，是绝对路径                                       |
| ./             | 表示当前目录，是相对路径                                     |
| ../            | 表示上一级目录，是相对路径                                   |
| /root          | root用户的主目录                                             |
| /home/username | 存放普通用户的个人配置文件                                   |
| /bin           | 存放Linux常用命令                                            |
| /boot          | 存放系统启动时要用到的文件                                   |
| /dev           | 存放系统中使用的外部设备                                     |
| /etc           | 存放系统管理时用到的配置文件和子目录                         |
| /usr/sbin      | 存放管理员的系统管理程序                                     |
| /lib           | 存放系统动态链接共享库，通常后缀名为.so，类似于Windows中的.dll |
| /lost+found    | 系统运行异常时产生的错误，会将遗失的片段放在这里             |
| /mnt           | 可临时将别的外部折别挂接在此目录下                           |
| /proc          | 存在系统内存中的信息                                         |
| /usr           | 用户的应用程序和文件都存放在这个目录下                       |
| /tmp           | 存放临时文件的目录                                           |
| /opt           | Optional，可选目录，默认是空的，交由用户使用                 |

- 通常情况下，我们可以使用/opt和/home目录，这两个目录均是由用户自由处理的，不存在敏感文件，也可以将程序安装在安装在/opt目录下，默认情况下，程序安装路径会在/usr/bin或/var/目录下。



## 三、常用命令使用

### 1. top命令

- 类似于Windows的任务管理器，可以查看CPU和内存等使用情况，也可以查看每隔进程所消耗CPU和内存，及进程ID等信息

### 2. 其他命令

| 命令              | 作用                                             |
| ----------------- | ------------------------------------------------ |
| cd ../或cd ..     | 切换到上一层目录                                 |
| cd 目录名         | 切换到对应目录                                   |
| pwd               | 查看当前所在目录                                 |
| du -sh            | 查看文件和文件夹大小                             |
| fdisk -l          | 查看磁盘分区列表                                 |
| free              | 查看内存使用情况                                 |
| cat 文件名        | 查看文本文件内容，如cat/etc/passwd可查看用户信息 |
| cat /proc/meminfo | 查看内存信息                                     |
| cat /proc/cpuinfo | 查看CPU信息                                      |

## 四、Linux的启动级别

| 命令实例         | 作用                                                     |
| ---------------- | -------------------------------------------------------- |
| 文件/etc/inittab | 设置默认启动级别                                         |
| 0                | 代表halt，关机操作，这个0不能设置，否则机器将不能启动    |
| 2                | 代表单用户模式，采用这个设置，系统只能允许一个用户登录   |
| 3                | 代表命令行界面，即文本界面，是企业中服务器通用的启动模式 |
| 4                | 系统预留，该级别目前还没有使用                           |
| 5                | 代表图形界面，也是Linux系统启动时带GUI的启动模式         |
| 6                | 代表重启模式，这个6也不能设置，否则系统会反复重启        |

## 五、Linux的关机与重启

| 命令实例          | 作用               |
| ----------------- | ------------------ |
| reboot            | 重启               |
| shutdown -r now   | 现在立刻重启       |
| shutdown -r 11:30 | 等到11：30重启     |
| shutdown -r +1    | 等一分钟重启       |
| halt              | 关机               |
| shutdown -h now   | 先在立刻关闭系统   |
| shutdown -h 11:30 | 等到11：30关闭系统 |
| init 0            | 关机               |
| init 6            | 重启               |



