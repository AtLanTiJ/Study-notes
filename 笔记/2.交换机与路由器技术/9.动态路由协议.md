# 动态路由协议

## 一、路由协议

### 1. 静态路由

- 单向的，需要管理员配置

### 2. 动态路由

- 是在路由器设备上去启用某路由协议，进行自己直连网段的宣告，从而相邻的路由器就可以学习到相邻的路由器所宣告的网段
- 常见的动态路由协议
  - RIP：路由信息协议（距离矢量路由协议）
  - OSPF：开放式最短路径优先（内部网关协议）
  - BGP：边界网关协议
  - IS－IS：中间系统到中间系统
  - EIGRP：增强内部网关路由协议

## 二、动态路由的特点

- 减少了管理员工作量
- 增加了网络带宽

## 三、内部和边界

- AS（自治系统）：运行相同路由协议的路由器属于同一个自治系统
- 通过自治系统内链接外部的路由器，这是就需要由外部网关
- 内部网关路由协议（IGP）：用于在单一自治系统中决策路由，如RIP、OSPF
- 外部网关路由协议（EGP）：用于连接不同的自治系统，BGP

## 四、动态路由协议需要考虑的内容

- 度量值：跳数、带宽、负载、实验、成本……
- 收敛：使所有路由器的路由表都达到一致的状态
- 自治系统

## 五、RIP动态路由协议

### 1. 基本概念

- 一种内部网关协议，在单一自治系统内的路由器去产生路由信息
- 靠跳数（metric)来衡量到达目的的距离
  - 最大15跳，16跳不可达
- 每隔30秒向相邻路由器发送路由更新消息，采用的UDP520端口
- RIP动态路由协议是从相邻路由器去学习对应的路由条目

### 2. RIP的版本

- RIP v1
  - 有类路由协议（采用标准子网掩码）
  - 广播更新
  - 不支持VLSM（可变长子网掩码，非标准子网掩码）
  - 自动路由汇总，不可关闭
  - 不支持不连续子网
- RIPv2
  - 无类路由协议（可以使用非标准子网掩码）
  - 组播更新（只会向运行了RIP的路由器发送更新消息）
  - 支持VLSM
  - 自动汇总，可以关闭
  - 支持不连续的子网

### 3. 配置

- 启用RIP

  ```
  router rip
  ```

- 宣告网段

  ```
  network 直连网段
  ```

- RIPv2关闭网段自动汇总

  ```
  no auto-summary
  ```

- 选择启用RIPv2

  ```
  router rip
  version 2
  ```

  

